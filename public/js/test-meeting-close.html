<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meeting Close Button Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Test fullscreen styles */
        .meeting-fullscreen {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            bottom: 0 !important;
            z-index: 9999 !important;
            background: #111827 !important;
        }

        /* Ensure meeting controls always appear above fullscreen content */
        .meeting-fullscreen #leaveMeeting,
        .meeting-fullscreen #fullscreenBtn,
        .meeting-fullscreen .meeting-control-button {
            z-index: 99999 !important;
            position: relative !important;
        }

        /* Ensure confirmation modals appear above fullscreen */
        #leaveConfirmModal {
            z-index: 99999 !important;
        }
    </style>
</head>

<body class="bg-gray-900 text-white">
    <div id="meetingInterface" class="min-h-screen bg-gray-900 flex flex-col">
        <div class="bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 text-white px-4 py-3 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <span>Test Meeting</span>
            </div>
            <button id="fullscreenBtn"
                class="bg-black bg-opacity-20 hover:bg-opacity-30 text-white px-3 py-2 rounded-lg transition-all duration-200 flex items-center gap-2 text-sm font-medium hover:scale-105 focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 z-[99999] relative">
                Toggle Fullscreen
            </button>
        </div>

        <div class="flex-1 flex items-center justify-center">
            <div class="text-center">
                <h1 class="text-2xl mb-4">Meeting Interface Test</h1>
                <p class="mb-4">Click "Toggle Fullscreen" then try the close button</p>
                <p class="text-sm text-gray-400">Z-index: Meeting controls should always be visible</p>
            </div>
        </div>

        <div class="bg-gray-800 border-t border-gray-700 p-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <span class="text-sm">Controls:</span>
            </div>
            <div class="flex items-center gap-3">
                <button id="leaveMeeting"
                    class="w-12 h-12 sm:w-14 sm:h-14 rounded-full bg-red-600 hover:bg-red-700 text-white flex items-center justify-center transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-red-500 active:scale-95 z-[99999] relative meeting-control-button"
                    title="Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„Ø¬Ù„Ø³Ø©">
                    X
                </button>
            </div>
        </div>
    </div>

    <script>
        // Test fullscreen toggle
        document.getElementById('fullscreenBtn').addEventListener('click', function () {
            const meetingInterface = document.getElementById('meetingInterface');
            if (meetingInterface.classList.contains('meeting-fullscreen')) {
                meetingInterface.classList.remove('meeting-fullscreen');
                this.textContent = 'Enter Fullscreen';
                console.log('âœ… Exited fullscreen mode');
            } else {
                meetingInterface.classList.add('meeting-fullscreen');
                this.textContent = 'Exit Fullscreen';
                console.log('âœ… Entered fullscreen mode');
            }
        });

        // Test leave button modal
        document.getElementById('leaveMeeting').addEventListener('click', function () {
            console.log('ðŸšª Leave button clicked');

            // Create modal with high z-index
            const modal = document.createElement('div');
            modal.id = 'leaveConfirmModal';
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[99999]';

            modal.innerHTML = `
                <div class="bg-gray-800 rounded-lg p-6 max-w-md mx-4">
                    <h3 class="text-xl font-bold text-white mb-4">Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„Ø¬Ù„Ø³Ø©</h3>
                    <p class="text-gray-300 mb-6">Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„Ø¬Ù„Ø³Ø©ØŸ</p>
                    <div class="flex justify-end space-x-3 space-x-reverse">
                        <button id="cancelLeave" class="px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors">
                            Ø¥Ù„ØºØ§Ø¡
                        </button>
                        <button id="confirmLeave" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors">
                            Ù…ØºØ§Ø¯Ø±Ø©
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);

            // Handle close
            const closeModal = () => {
                modal.remove();
            };

            modal.querySelector('#cancelLeave').addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) closeModal();
            });

            modal.querySelector('#confirmLeave').addEventListener('click', () => {
                modal.remove();
                alert('âœ… Leave functionality working! Page would reload here.');
                console.log('âœ… Leave confirmed - page reload instead of redirect');
                // In real implementation: window.location.reload();
            });
        });

        console.log('âœ… Test page loaded. Try the fullscreen and close buttons!');
    </script>
</body>

</html>