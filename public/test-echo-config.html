<!DOCTYPE html>
<html>
<head>
    <title>Test Echo Configuration</title>
</head>
<body>
    <h1>Echo Configuration Test</h1>
    <pre id="output"></pre>

    <script type="module">
        // Force load the latest built JavaScript with cache busting
        const timestamp = new Date().getTime();
        const script = document.createElement('script');
        script.type = 'module';
        script.src = `/build/assets/app-CxNkDpVa.js?v=${timestamp}`;

        script.onload = () => {
            const output = document.getElementById('output');

            if (typeof window.Echo === 'undefined') {
                output.textContent = '❌ Echo is not loaded';
                return;
            }

            const config = window.Echo.connector.options;

            output.textContent = `✅ Echo Configuration:

forceTLS: ${config.forceTLS}
wsHost: ${config.wsHost}
wsPort: ${config.wsPort}
wssPort: ${config.wssPort}

Expected:
forceTLS: false
wsHost: localhost
wsPort: 8085

Connection State: ${window.Echo.connector.pusher.connection.state}

${config.forceTLS === false ? '✅ forceTLS is correctly FALSE' : '❌ forceTLS is ' + config.forceTLS + ' (should be false)'}
${config.wsHost === 'localhost' ? '✅ wsHost is correct' : '❌ wsHost is ' + config.wsHost}
${config.wsPort === 8085 || config.wsPort === '8085' ? '✅ wsPort is correct' : '❌ wsPort is ' + config.wsPort}
`;
        };

        script.onerror = () => {
            document.getElementById('output').textContent = '❌ Failed to load JavaScript bundle';
        };

        document.head.appendChild(script);
    </script>
</body>
</html>
